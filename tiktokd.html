<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>qTikSave</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
        .paste-button {
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .paste-button:hover {
            background-color: #e5e7eb;
        }
        .submit-button {
            background-color: #1976D2;
            color: white;
            font-weight: bold;
            padding: 0.75rem;
            border-radius: 0.375rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, transform 0.3s;
        }
        .submit-button:hover {
            background-color: #1565C0;
            transform: scale(1.05);
        }
        .submit-button:active {
            background-color: #10b981;
        }
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background-color: white;
            z-index: 1000;
        }
        .download-button {
            background-color: white;
            color: black;
            border: 1px solid black;
            padding: 0.5rem;
            border-radius: 0.375rem;
            text-align: center;
            flex: 1;
            transition: background-color 0.3s;
        }
        .download-button:hover {
            background-color: #f3f4f6;
        }
        .footer {
            background-color: #f3f4f6;
            padding: 2rem;
            margin-top: 2rem;
            width: 100%;
        }
        .footer h3 {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        .footer a {
            color: #1976D2;
            text-decoration: none;
            transition: color 0.3s;
        }
        .footer a:hover {
            color: #1565C0;
        }
        audio {
            display: block;
            width: 100%;
            height: 30px;
            border: 1px solid black;
            border-radius: 5px;
            background-color: #f3f3f3;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
        }
        .rainbow-text {
            animation: rainbow 3s infinite;
        }
        @keyframes rainbow {
            0% { color: rgb(0, 0, 255); }
            33% { color: rgb(128, 0, 128); }
            66% { color: rgb(255, 255, 0); }
            100% { color: rgb(0, 0, 255); }
        }
    </style>
</head>
<body class="bg-white text-gray-800">
    <div class="navbar border-b border-black p-2">
        <div class="flex items-center justify-between max-w-7xl mx-auto">
            <h1 class="text-4xl font-bold ml-2 rainbow-text"><p class="font-serif">TikiDL</p></h1>
            <i class="fas fa-bars text-xl ml-2 mr-2"></i>
        </div>
    </div>
    <div class="flex flex-col items-center justify-center min-h-screen p-4 pt-20">
        <p class="mt-4 text-center text-gray-600">TikiDL adalah situs web Pengunduh TikTok yang cepat dan bebas iklan, Masukkan Tautan Anda Di Bawah.</p>
        <div class="mt-6 w-full max-w-md">
            <div class="relative">
                <input id="urlInput" type="text" placeholder="Input URL..." class="w-full p-3 border border-blue-500 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button onclick="pasteClipboard()" class="paste-button absolute right-3 top-2.5">
                    <i class="fas fa-clipboard text-gray-500"></i>
                </button>
            </div>
            <button id="submitButton" class="mt-3 w-full submit-button" onclick="sendLink()">KIRIM</button>
        </div>
        <div id="apiResult" class="mt-4 w-full max-w-md p-4 border border-gray-200 rounded-md shadow-md"></div>
        <div class="mt-16 text-center">
            <h2 style="font-family: Copperplate, 'Copperplate Gothic Light', fantasy; font-size: 24px; font-weight: 700; line-height: 26.4px;">
                Why should you use <span style="color: #f06;">Tiki<span style="color: #f06;">DL</span></span>
            </h2>       
        </div>
        <div class="mt-8 w-full max-w-md">
            <div class="p-4 border border-gray-200 rounded-md shadow-md">
                <center>
                    <p class="text-2xl"></p>
                    <p class="mt-2 text-xl font-bold">CEPAT</p>
                </center>
            </div>
        </div>
        <div class="mt-8 w-full max-w-md">
            <div class="p-4 border border-gray-200 rounded-md shadow-md">
                <center>
                    <p class="text-2xl"></p>
                    <p class="mt-2 text-xl font-bold">AMAN</p>
                </center>
            </div>
        </div>
        <div class="mt-8 w-full max-w-md">
            <div class="p-4 border border-gray-200 rounded-md shadow-md">
                <center>
                    <p class="text-2xl"></p>
                    <p class="mt-2 text-xl font-bold">TANPA IKLAN</p>
                </center>
            </div>
        </div>
        <div class="mt-16 w-full max-w-2xl">
            <h2 class="text-3xl font-bold text-center mb-4">Cara Menggunakan web TikiDL</h2>
            <div class="bg-gray-100 p-6 rounded-md shadow-md">
                <ol class="list-decimal list-inside space-y-4">
                    <li>
                        <p class="font-bold">Salin Tautan Video TikTok</p>
                        <p class="text-gray-600">Buka aplikasi TikTok dan salin tautan video yang ingin Anda unduh.</p>
                    </li>
                    <li>
                        <p class="font-bold">Tempel Tautan di qTikSave</p>
                        <p class="text-gray-600">Tempel tautan video TikTok yang telah Anda salin ke dalam kotak input di atas.</p>
                    </li>
                    <li>
                        <p class="font-bold">Klik Tombol "KIRIM"</p>
                        <p class="text-gray-600">Klik tombol "KIRIM" untuk memproses tautan video TikTok Anda.</p>
                    </li>
                    <li>
                        <p class="font-bold">Unduh Video</p>
                        <p class="text-gray-600">Setelah video diproses, Anda akan melihat beberapa opsi unduhan. Pilih format yang Anda inginkan dan klik tombol unduh. Setelah itu tekan lama video untuk mengunduh video</p>
                    </li>
                </ol>
            </div>
        </div>
        <div class="footer mt-16">
            <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3>Fitur Lainnya</h3>
                    <a href="index4.html">Apple music downloader</a><br>
                    <a href="spotify.html">Spotify downloader</a>
                </div>
                <div>
                    <h3>Legality</h3>
                    <a href="#">Terms Of Service</a><br>
                    <a href="#">Privacy Policy</a>
                </div>
                <div>
                    <h3>Community</h3>
                    <a href="https://chat.whatsapp.com/IEzFm5hQz2fIwpI6NNDTvN">WhatsApp group</a><br>
                </div>
            </div>
            <div class="text-center mt-8">
                <p>© TikiDL 2024</p>
            </div>
        </div>
    </div>
    <script>
    function pasteClipboard() {
        navigator.clipboard.readText()
            .then(text => {
                document.getElementById('urlInput').value = text;
            })
            .catch(err => {
                console.error('Failed to read clipboard contents: ', err);
            });
    }

    function downloadFile(url, fileName) {
        fetch(url)
            .then(response => response.blob())
            .then(blob => {
                const objectURL = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = objectURL;
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(objectURL);
            })
            .catch(error => console.error('Error downloading the file:', error));
    }

    function sendLink() {
        const url = document.getElementById('urlInput').value;
        const apiUrl = `https://api.tiklydown.eu.org/api/download/v5?url=${encodeURIComponent(url)}`;
        const submitButton = document.getElementById('submitButton');
        submitButton.innerText = 'Loading...';

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                if (data.status === 200) {
                    const result = data.result;

                    const apiResultDiv = document.getElementById('apiResult');
                    const title = result.title || "Tidak ada judul";
                    const shortTitle = title.length > 50 ? title.substring(0, 50) + '...' : title;

                    const nickname = result.author.nickname || "Tidak diketahui";
                    const uniqueId = result.author.unique_id || "Tidak diketahui";
                    const profile = result.author.avatar || "https://via.placeholder.com/150";
                    const soundTitle = result.music_info.title || "Tidak ada judul musik";
                    const nowatermark = result.play || "#";
                    const watermark = result.wmplay || "#";
                    const hdplay = result.hdplay || "#";
                    const mp3Link = result.music || "#";

                    const currentDate = new Date();
                    const formattedDate = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}-${String(currentDate.getDate()).padStart(2, '0')}`;
                    const formattedTime = `${String(currentDate.getHours()).padStart(2, '0')}-${String(currentDate.getMinutes()).padStart(2, '0')}-${String(currentDate.getSeconds()).padStart(2, '0')}`;

                    apiResultDiv.innerHTML = `
                        <h3 class="text-xl font-bold">Video Details</h3>
                        <p><strong>Title:</strong> <span id="titleText">${shortTitle}</span> <a href="#" id="readMore" class="text-blue-500">baca selengkapnya...</a><a href="#" id="readLess" class="text-blue-500" style="display:none;">baca sedikit...</a></p>
                        <div class="relative">
                            <video controls class="mt-2 w-full rounded-md">
                                <source src="${nowatermark}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                            <div class="absolute top-2 left-2 flex items-center">
                                <img src="${profile}" alt="Author Avatar" class="w-12 h-12 rounded-full border-2 border-white">
                                <div class="ml-2">
                                    <p class="font-bold text-white">${nickname}</p>
                                    <p class="text-sm text-white">${uniqueId}</p>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center mt-4">
                            <div class="flex items-center">
                                <i class="fas fa-play text-gray-500 mr-1"></i>
                                <span>${result.play_count}</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-heart text-red-500 mr-1"></i>
                                <span>${result.digg_count}</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-comment text-gray-500 mr-1"></i>
                                <span>${result.comment_count}</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-share text-gray-500 mr-1"></i>
                                <span>${result.share_count}</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-bookmark text-gray-500 mr-1"></i>
                                <span>${result.collect_count}</span>
                            </div>
                        </div>
                        <div class="mt-4 flex flex-wrap gap-2">
                            <button onclick="downloadFile('${nowatermark}', 'TikiDL_${formattedDate}_${formattedTime}.mp4')" class="download-button">Download Video</button>
                            <button onclick="downloadFile('${hdplay}', 'TikiDL_HD_${formattedDate}_${formattedTime}.mp4')" class="download-button">Download Video HD</button>
                            <button onclick="downloadFile('${watermark}', 'TikiDL_WM_${formattedDate}_${formattedTime}.mp4')" class="download-button">Download Video WM</button>
                        </div>
                        <div class="mt-4 flex items-center">
                            <svg width="30px" height="30px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <title>music [#995]</title>
                                <desc>Created with Sketch.</desc>
                                <defs></defs>
                                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <g id="Dribbble-Light-Preview" transform="translate(-260.000000, -3799.000000)" fill="#000000">
                                        <g id="icons" transform="translate(56.000000, 160.000000)">
                                            <path d="M211.987988,3643 L221.997998,3643 L221.997998,3641 L211.987988,3641 L211.987988,3643 Z M209.985986,3639 L209.985986,3651.535 C208.984985,3651.195 208.726727,3651 207.997998,3651 C205.785786,3651 204,3652.791 204,3655 C204,3657.209 205.782783,3659 207.993994,3659 C210.205205,3659 211.987988,3657.209 211.987988,3655 L211.987988,3645 L221.997998,3645 L221.997998,3651.535 C220.996997,3651.195 220.738739,3651 220.01001,3651 C217.797798,3651 216.012012,3652.791 216.012012,3655 C216.012012,3657.209 217.794795,3659 220.006006,3659 C222.217217,3659 224,3657.209 224,3655 L224,3639 L209.985986,3639 Z" id="music-[#995]"></path>
                                        </g>
                                    </g>
                                </g>
                            </svg>              	
                            <p class="ml-2 font-bold">${soundTitle}</p>
                        </div>
                        <div class="mt-4">
                            <audio controls class="w-full">
                                <source src="${mp3Link}" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                            <button onclick="downloadFile('${mp3Link}', 'TikiDL_${formattedDate}_${formattedTime}.mp3')" class="block w-full text-center download-button mt-2">Download MP3</button>
                        </div>
                    `;

                    document.getElementById('readMore').addEventListener('click', function (event) {
                        event.preventDefault();
                        document.getElementById('titleText').innerText = title;
                        this.style.display = 'none';
                        document.getElementById('readLess').style.display = 'inline';
                    });

                    document.getElementById('readLess').addEventListener('click', function (event) {
                        event.preventDefault();
                        document.getElementById('titleText').innerText = shortTitle;
                        this.style.display = 'none';
                        document.getElementById('readMore').style.display = 'inline';
                    });

                } else {
                    document.getElementById('apiResult').innerText = `Error: ${data.message}`;
                }
                submitButton.innerText = 'KIRIM';
            })
            .catch(error => {
                document.getElementById('apiResult').innerText = `Error: ${error.message}`;
                submitButton.innerText = 'KIRIM';
            });
    }
    </script>
</body>
</html>